<h1 class="p-4">Exercise Sheets</h1>

<div class="d-flex row px-4">
    <div class="justify-content-start col">
        <ng-select [clearSearchOnAdd]="true" [searchable]="true" (change)="filterAuthorsChange($event)"
                   [clearable]="false" [items]="authors"
                   [multiple]="true" bindLabel="name" placeholder="Filter by author">
        </ng-select>
    </div>
    <div class="col">
        <ng-select [clearSearchOnAdd]="true" [searchable]="true" (change)="filterCoursesChange($event)"
                   [clearable]="false"
                   [items]="courses" [multiple]="true" bindLabel="name" placeholder="Filter by course">
        </ng-select>
    </div>
    <div class="col">
        <ng-select [clearSearchOnAdd]="true" [searchable]="true" (change)="filterCategoriesChange($event)"
                   [clearable]="false"
                   [items]="categories" [multiple]="true" bindLabel="name" placeholder="Filter by category">
        </ng-select>
    </div>
    <div class="text-end col">
        <a class=" btn btn-primary " routerLink="/create-exercise-sheet">
            <svg class="svg-icon" width="16" height="16" fill="white" class="bi bi-download"
                 viewBox="2 2 18 18">
                <path
                    d="M14.613,10c0,0.23-0.188,0.419-0.419,0.419H10.42v3.774c0,0.23-0.189,0.42-0.42,0.42s-0.419-0.189-0.419-0.42v-3.774H5.806c-0.23,0-0.419-0.189-0.419-0.419s0.189-0.419,0.419-0.419h3.775V5.806c0-0.23,0.189-0.419,0.419-0.419s0.42,0.189,0.42,0.419v3.775h3.774C14.425,9.581,14.613,9.77,14.613,10 M17.969,10c0,4.401-3.567,7.969-7.969,7.969c-4.402,0-7.969-3.567-7.969-7.969c0-4.402,3.567-7.969,7.969-7.969C14.401,2.031,17.969,5.598,17.969,10 M17.13,10c0-3.932-3.198-7.13-7.13-7.13S2.87,6.068,2.87,10c0,3.933,3.198,7.13,7.13,7.13S17.13,13.933,17.13,10">
                </path>
            </svg>
            Create Exercise Sheet</a>
    </div>
    <!--    <div class="text-end col">-->
    <!--        <button type="button" class="btn btn-primary mt-3" routerLink="/create-exercise-sheet">Create Exercise Sheet</button>-->
    <!--    </div>-->
</div>


<div class="px-4">
    <table class="table table-striped">
        <thead>
        <tr>
            <th scope="col" class="col-3"> Title</th>
            <th scope="col" class="col-3"> Course</th>
            <th scope="col" class="col-3"> Category</th>
            <th scope="col" class="col-2"> Author</th>
            <th scope="col" class="col-2"> Published At</th>
            <th scope="col" class="col-2"></th>
        </tr>
        </thead>
        <tbody *ngIf = "isLoaded">
        <tr
            *ngFor="let sheet of filteredSheets | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize">


            <td scope="row">{{ sheet.title }}</td>
            <td scope="row">{{ getSheetCourses(sheet.courses) }}</td>
            <td scope="row">{{ getSheetCategories(sheet.categories) }}</td>
            <td scope="row">{{ sheet.author.name }}</td>
            <td scope="row">{{ sheet.publishedAt|date:'dd.MM.YYYY' }}</td>
            <td scope="row">
                <button type="submit" class="btn btn-success btn-sm"
                        onclick="window.open('http://www.africau.edu/images/default/sample.pdf')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16"
                         height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                        <path
                            d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                        <path
                            d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                    </svg>
                </button>
            </td>

        </tr>
        </tbody>
    </table>
    <div *ngIf = "!isLoaded" class="d-flex justify-content-center">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only"></span>
        </div>
      </div>

    <div *ngIf = "isLoaded" class="row ">
        <div class="col-1 "></div>
        <div class="col-3 ">
            <select class="form-select" style="width:200px" [ngModel]="pageSize" (ngModelChange)="setPageSize($event)">
                <option [ngValue]="5">5 items per page</option>
                <option [ngValue]="10">10 items per page</option>
                <option [ngValue]="25">25 items per page</option>
                <option [ngValue]="50">50 items per page</option>
            </select>
        </div>
        <div class="col-4  d-flex justify-content-around">
            <ngb-pagination [collectionSize]="sheets.length" [(page)]="page" [pageSize]="pageSize"
                            [boundaryLinks]="true"></ngb-pagination>
        </div>
        <div class="col-4 ">
        </div>
    </div>
</div>
